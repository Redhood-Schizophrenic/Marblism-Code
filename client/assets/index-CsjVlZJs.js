import{r as o}from"./index-DRMtkY8T.js";import{p as ce,g as X,m as K,r as U,b as de,e as ue,C as V,s as fe,c as T,q,t as pe}from"./index-Ch39FAg7.js";import{u as Y,R as ge,i as me,g as ve,P as he,b as ye,c as Ce,d as be,e as Se,f as xe,h as Oe,K as Pe}from"./index-D1nLi7B9.js";import{u as $e,r as ze}from"./responsiveObserver-C9MLPLcO.js";function we(){const[,e]=o.useReducer(n=>n+1,0);return e}function Ee(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=o.useRef({}),r=we(),t=$e();return ce(()=>{const s=t.subscribe(i=>{n.current=i,e&&r()});return()=>t.unsubscribe(s)},[]),n.current}const F=o.createContext({}),je=e=>{const{antCls:n,componentCls:r,iconCls:t,avatarBg:s,avatarColor:i,containerSize:f,containerSizeLG:p,containerSizeSM:l,textFontSize:c,textFontSizeLG:d,textFontSizeSM:C,borderRadius:g,borderRadiusLG:u,borderRadiusSM:x,lineWidth:b,lineType:R}=e,a=(O,S,k)=>({width:O,height:O,borderRadius:"50%",[`&${r}-square`]:{borderRadius:k},[`&${r}-icon`]:{fontSize:S,[`> ${t}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},U(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:i,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${de(b)} ${R} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),a(f,c,g)),{"&-lg":Object.assign({},a(p,d,u)),"&-sm":Object.assign({},a(l,C,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Ne=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:t,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:t}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},Re=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:t,fontSize:s,fontSizeLG:i,fontSizeXL:f,fontSizeHeading3:p,marginXS:l,marginXXS:c,colorBorderBg:d}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:t,textFontSize:Math.round((i+f)/2),textFontSizeLG:p,textFontSizeSM:s,groupSpace:c,groupOverlapping:-l,groupBorderColor:d}},Z=X("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,t=K(e,{avatarBg:r,avatarColor:n});return[je(t),Ne(t)]},Re);var ke=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)n.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]]);return r};const Be=(e,n)=>{const[r,t]=o.useState(1),[s,i]=o.useState(!1),[f,p]=o.useState(!0),l=o.useRef(null),c=o.useRef(null),d=ue(n,l),{getPrefixCls:C,avatar:g}=o.useContext(V),u=o.useContext(F),x=()=>{if(!c.current||!l.current)return;const v=c.current.offsetWidth,h=l.current.offsetWidth;if(v!==0&&h!==0){const{gap:N=4}=e;N*2<h&&t(h-N*2<v?(h-N*2)/v:1)}};o.useEffect(()=>{i(!0)},[]),o.useEffect(()=>{p(!0),t(1)},[e.src]),o.useEffect(x,[e.gap]);const b=()=>{const{onError:v}=e;(v==null?void 0:v())!==!1&&p(!1)},{prefixCls:R,shape:a,size:O,src:S,srcSet:k,icon:w,className:W,rootClassName:A,alt:_,draggable:E,children:z,crossOrigin:B}=e,P=ke(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),m=fe(v=>{var h,N;return(N=(h=O??(u==null?void 0:u.size))!==null&&h!==void 0?h:v)!==null&&N!==void 0?N:"default"}),y=Object.keys(typeof m=="object"?m||{}:{}).some(v=>["xs","sm","md","lg","xl","xxl"].includes(v)),j=Ee(y),I=o.useMemo(()=>{if(typeof m!="object")return{};const v=ze.find(N=>j[N]),h=m[v];return h?{width:h,height:h,fontSize:h&&(w||z)?h/2:18}:{}},[j,m]),$=C("avatar",R),G=Y($),[ne,re,oe]=Z($,G),se=T({[`${$}-lg`]:m==="large",[`${$}-sm`]:m==="small"}),H=o.isValidElement(S),ae=a||(u==null?void 0:u.shape)||"circle",ie=T($,se,g==null?void 0:g.className,`${$}-${ae}`,{[`${$}-image`]:H||S&&f,[`${$}-icon`]:!!w},oe,G,W,A,re),le=typeof m=="number"?{width:m,height:m,fontSize:w?m/2:18}:{};let M;if(typeof S=="string"&&f)M=o.createElement("img",{src:S,draggable:E,srcSet:k,onError:b,alt:_,crossOrigin:B});else if(H)M=S;else if(w)M=w;else if(s||r!==1){const v=`scale(${r})`,h={msTransform:v,WebkitTransform:v,transform:v};M=o.createElement(ge,{onResize:x},o.createElement("span",{className:`${$}-string`,ref:c,style:Object.assign({},h)},z))}else M=o.createElement("span",{className:`${$}-string`,style:{opacity:0},ref:c},z);return delete P.onError,delete P.gap,ne(o.createElement("span",Object.assign({},P,{style:Object.assign(Object.assign(Object.assign(Object.assign({},le),I),g==null?void 0:g.style),P.style),className:ie,ref:d}),M))},J=o.forwardRef(Be),L=e=>e?typeof e=="function"?e():e:null,Ie=e=>{const{componentCls:n,popoverColor:r,titleMinWidth:t,fontWeightStrong:s,innerPadding:i,boxShadowSecondary:f,colorTextHeading:p,borderRadiusLG:l,zIndexPopup:c,titleMarginBottom:d,colorBgElevated:C,popoverBg:g,titleBorderBottom:u,innerContentPadding:x,titlePadding:b}=e;return[{[n]:Object.assign(Object.assign({},U(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:c,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":C,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:l,boxShadow:f,padding:i},[`${n}-title`]:{minWidth:t,marginBottom:d,color:p,fontWeight:s,borderBottom:u,padding:b},[`${n}-inner-content`]:{color:r,padding:x}})},ve(e,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${n}-content`]:{display:"inline-block"}}}]},Te=e=>{const{componentCls:n}=e;return{[n]:he.map(r=>{const t=e[`${r}6`];return{[`&${n}-${r}`]:{"--antd-arrow-background-color":t,[`${n}-inner`]:{backgroundColor:t},[`${n}-arrow`]:{background:"transparent"}}}})}},_e=e=>{const{lineWidth:n,controlHeight:r,fontHeight:t,padding:s,wireframe:i,zIndexPopupBase:f,borderRadiusLG:p,marginXS:l,lineType:c,colorSplit:d,paddingSM:C}=e,g=r-t,u=g/2,x=g/2-n,b=s;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:f+30},ye(e)),Ce({contentRadius:p,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:l,titlePadding:i?`${u}px ${b}px ${x}px`:0,titleBorderBottom:i?`${n}px ${c} ${d}`:"none",innerContentPadding:i?`${C}px ${b}px`:0})},Q=X("Popover",e=>{const{colorBgElevated:n,colorText:r}=e,t=K(e,{popoverBg:n,popoverColor:r});return[Ie(t),Te(t),me(t,"zoom-big")]},_e,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Me=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)n.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]]);return r};const ee=e=>{let{title:n,content:r,prefixCls:t}=e;return!n&&!r?null:o.createElement(o.Fragment,null,n&&o.createElement("div",{className:`${t}-title`},n),r&&o.createElement("div",{className:`${t}-inner-content`},r))},We=e=>{const{hashId:n,prefixCls:r,className:t,style:s,placement:i="top",title:f,content:p,children:l}=e,c=L(f),d=L(p),C=T(n,r,`${r}-pure`,`${r}-placement-${i}`,t);return o.createElement("div",{className:C,style:s},o.createElement("div",{className:`${r}-arrow`}),o.createElement(be,Object.assign({},e,{className:n,prefixCls:r}),l||o.createElement(ee,{prefixCls:r,title:c,content:d})))},Ae=e=>{const{prefixCls:n,className:r}=e,t=Me(e,["prefixCls","className"]),{getPrefixCls:s}=o.useContext(V),i=s("popover",n),[f,p,l]=Q(i);return f(o.createElement(We,Object.assign({},t,{prefixCls:i,hashId:p,className:T(r,l)})))};var Le=function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(e);s<t.length;s++)n.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(e,t[s])&&(r[t[s]]=e[t[s]]);return r};const Ve=o.forwardRef((e,n)=>{var r,t;const{prefixCls:s,title:i,content:f,overlayClassName:p,placement:l="top",trigger:c="hover",children:d,mouseEnterDelay:C=.1,mouseLeaveDelay:g=.1,onOpenChange:u,overlayStyle:x={}}=e,b=Le(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:R}=o.useContext(V),a=R("popover",s),[O,S,k]=Q(a),w=R(),W=T(p,S,k),[A,_]=Se(!1,{value:(r=e.open)!==null&&r!==void 0?r:e.visible,defaultValue:(t=e.defaultOpen)!==null&&t!==void 0?t:e.defaultVisible}),E=(y,j)=>{_(y,!0),u==null||u(y,j)},z=y=>{y.keyCode===Pe.ESC&&E(!1,y)},B=y=>{E(y)},P=L(i),m=L(f);return O(o.createElement(xe,Object.assign({placement:l,trigger:c,mouseEnterDelay:C,mouseLeaveDelay:g,overlayStyle:x},b,{prefixCls:a,overlayClassName:W,ref:n,open:A,onOpenChange:B,overlay:P||m?o.createElement(ee,{prefixCls:a,title:P,content:m}):null,transitionName:Oe(w,"zoom-big",b.transitionName),"data-popover-inject":!0}),q(d,{onKeyDown:y=>{var j,I;o.isValidElement(d)&&((I=d==null?void 0:(j=d.props).onKeyDown)===null||I===void 0||I.call(j,y)),z(y)}})))}),te=Ve;te._InternalPanelDoNotUseOrYouWillBeFired=Ae;const D=e=>{const{size:n,shape:r}=o.useContext(F),t=o.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return o.createElement(F.Provider,{value:t},e.children)},Fe=e=>{var n,r,t;const{getPrefixCls:s,direction:i}=o.useContext(V),{prefixCls:f,className:p,rootClassName:l,style:c,maxCount:d,maxStyle:C,size:g,shape:u,maxPopoverPlacement:x,maxPopoverTrigger:b,children:R,max:a}=e,O=s("avatar",f),S=`${O}-group`,k=Y(O),[w,W,A]=Z(O,k),_=T(S,{[`${S}-rtl`]:i==="rtl"},A,k,p,l,W),E=pe(R).map((P,m)=>q(P,{key:`avatar-key-${m}`})),z=(a==null?void 0:a.count)||d,B=E.length;if(z&&z<B){const P=E.slice(0,z),m=E.slice(z,B),y=(a==null?void 0:a.style)||C,j=((n=a==null?void 0:a.popover)===null||n===void 0?void 0:n.trigger)||b||"hover",I=((r=a==null?void 0:a.popover)===null||r===void 0?void 0:r.placement)||x||"top",$=Object.assign(Object.assign({content:m},a==null?void 0:a.popover),{overlayClassName:T(`${S}-popover`,(t=a==null?void 0:a.popover)===null||t===void 0?void 0:t.overlayClassName),placement:I,trigger:j});return P.push(o.createElement(te,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},$),o.createElement(J,{style:y},`+${B-z}`))),w(o.createElement(D,{shape:u,size:g},o.createElement("div",{className:_,style:c},P)))}return w(o.createElement(D,{shape:u,size:g},o.createElement("div",{className:_,style:c},E)))},Ge=J;Ge.Group=Fe;export{Ge as A};
